import{U as A,r as o,j as e,bg as I,B as i,q as S,ab as T,n as y,af as s,bi as _,bj as E,y as d,I as h}from"./index-BDZEQFom.js";function R(){const l=A(),[u,x]=o.useState([]),[f,c]=o.useState(!1),[m,g]=o.useState(0),[n,j]=o.useState({page:0,pageSize:10}),v=async()=>{debugger;try{c(!0);const t=await E("invoice_hed",n.page+1,n.pageSize);if(t!=null&&t.Data){const r=t.Data,b=r.map((a,w)=>({id:a.inV_NO||w,invoiceNo:a.inV_NO,invoiceDate:a.inV_DT,customerCode:a.cusT_CODE,totalAmount:a.totaL_AMT,netAmount:a.neT_AMT}));x(b),g(t.TotalRecords||r.length)}}catch(t){console.error("Invoice fetch error:",t)}finally{c(!1)}};o.useEffect(()=>{v()},[n]);const p=()=>{l("/material/sales-invoice-form/add")},C=t=>{l(`/material/sales-invoice-form/edit/${t.id}`,{state:t})},N=t=>{console.log("Delete invoice:",t)},D=[{field:"invoiceNo",headerName:"Invoice No",flex:1},{field:"invoiceDate",headerName:"Date",flex:1},{field:"customerCode",headerName:"Customer Code",flex:1},{field:"totalAmount",headerName:"Total Amount",flex:1},{field:"netAmount",headerName:"Net Amount",flex:1},{field:"actions",headerName:"Actions",width:120,sortable:!1,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(d,{title:"Edit",children:e.jsx(h,{onClick:()=>C(t.row),children:e.jsx(s,{color:"primary",children:"edit"})})}),e.jsx(d,{title:"Delete",children:e.jsx(h,{onClick:()=>N(t.row.id),children:e.jsx(s,{color:"error",children:"delete"})})})]})}];return e.jsxs(I,{maxWidth:"xl",children:[e.jsx(i,{className:"breadcrumb",children:e.jsx(S,{routeSegments:[{name:"Sales"},{name:"Invoice"}]})}),e.jsxs(T,{spacing:3,children:[e.jsx(i,{display:"flex",justifyContent:"flex-end",children:e.jsx(y,{variant:"contained",startIcon:e.jsx(s,{children:"add"}),onClick:p,children:"New"})}),e.jsx(i,{sx:{height:500,width:"100%"},children:e.jsx(_,{rows:u,columns:D,loading:f,rowCount:m,paginationMode:"server",paginationModel:n,onPaginationModelChange:j,pageSizeOptions:[5,10,20],disableRowSelectionOnClick:!0})})]})]})}export{R as default};
