import{d as _,U as p,W as f,e as N,j as a,C as y,G as l,B as m,V as d,X as j,s as b}from"./index-BDZEQFom.js";import{F as P,L as w,c as S,a as g}from"./LoadingButton-Bu6UPh5y.js";import{u as v}from"./notistack.esm-hn3b2--q.js";const C=b("div")(({theme:o})=>({display:"flex",alignItems:"center",justifyContent:"center",background:"#1A2038",minHeight:"100vh !important","& .card":{maxWidth:450,margin:"1rem",width:"100%"}})),D={Login_Name:"",Login_Pwd:""};S().shape({Login_Name:g().required("Login Name is required!"),Login_Pwd:g().min(6,"Password must be at least 6 characters").required("Password is required!")});function O(){const o=_(),c=p();f();const{enqueueSnackbar:t}=v(),{setUser:u}=N(),L=async(i,{setSubmitting:n})=>{try{n(!0);const e={token:"dummy-token",JsonData:{Divisions:[{login_name:i.Login_Name||"admin",PROFCEN_CD:"DEFAULT"}],Modules:[],Departments:[]},login_name:i.Login_Name||"admin",PROFCEN_CD:"DEFAULT"};u(e),localStorage.setItem("token",e.token),localStorage.setItem("divisions",JSON.stringify(e.JsonData.Divisions)),localStorage.setItem("modules",JSON.stringify([])),localStorage.setItem("departments",JSON.stringify([])),localStorage.setItem("PROFCEN_CD",e.PROFCEN_CD),localStorage.setItem("login_name",e.login_name),localStorage.setItem("userData",JSON.stringify(e)),t("Logged in (API bypassed)",{variant:"success"}),c("/dashboard/default",{replace:!0})}catch(e){console.error("Login error:",e),t("Login failed",{variant:"error"})}finally{n(!1)}};return a.jsx(C,{children:a.jsx(y,{className:"card",children:a.jsx(l,{container:!0,children:a.jsx(l,{xs:12,children:a.jsxs(m,{p:4,children:[a.jsx("h2",{style:{marginBottom:24,textAlign:"center"},children:"Login"}),a.jsx(P,{initialValues:D,onSubmit:L,children:({values:i,errors:n,touched:e,handleChange:s,handleBlur:r,handleSubmit:x,isSubmitting:h})=>a.jsxs("form",{onSubmit:x,children:[a.jsx(d,{fullWidth:!0,size:"small",name:"Login_Name",label:"Login Name",variant:"outlined",value:i.Login_Name,onChange:s,onBlur:r,helperText:e.Login_Name&&n.Login_Name,error:!!(n.Login_Name&&e.Login_Name),sx:{mb:3}}),a.jsx(d,{fullWidth:!0,size:"small",name:"Login_Pwd",type:"password",label:"Password",variant:"outlined",value:i.Login_Pwd,onChange:s,onBlur:r,helperText:e.Login_Pwd&&n.Login_Pwd,error:!!(n.Login_Pwd&&e.Login_Pwd),sx:{mb:2}}),a.jsx(m,{display:"flex",justifyContent:"flex-end",mb:2,children:a.jsx(j,{to:"/session/forgot-password",style:{color:o.palette.primary.main},children:"Forgot password?"})}),a.jsx(w,{type:"submit",loading:h,fullWidth:!0,color:"primary",variant:"contained",sx:{py:1.5},children:"Login"})]})})]})})})})})}export{O as default};
