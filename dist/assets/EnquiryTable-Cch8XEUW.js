import{U as N,r as s,j as a,bg as b,B as r,q as _,ab as D,n as z,af as l,bi as P,bo as v,bd as I,y as h,I as p,bp as k}from"./index-DGO-Ln70.js";function R(){const d=N(),[f,x]=s.useState([]),[g,o]=s.useState(!1),[m,q]=s.useState(0),[i,y]=s.useState({page:0,pageSize:5}),j=async()=>{o(!0);const e=await v("enquiry_hed",i.page+1,i.pageSize);if(e!=null&&e.Data){const n=e.Data.map((t,c)=>({id:`${t.Enq_no}-${t.Enq_dt}`,enquiryNo:t.Enq_no,date:t.Enq_dt,customer:t.Cust_name,type:t.Enq_type,source:t.source_name||"-",contactPerson:t.cont_per||"-",status:t.enq_close?"Closed":"Open",raw:t}));x(n),q(e.TotalCount||0)}o(!1)};s.useEffect(()=>{j()},[i]);const w=()=>{d("/material/sales-enquiry-form/add")},C=async e=>{const{Enq_no:n,Enq_dt:t,profcen_cd:c}=e.raw;o(!0);const u=await k({Enq_no:n,Enq_dt:t,profcen_cd:c});o(!1),u&&d(`/material/sales-enquiry-form/edit/${n}`,{state:{enquiryDetails:u}})},E=e=>{console.log("Delete:",e)},S=[{field:"enquiryNo",headerName:"Enquiry No",flex:1},{field:"date",headerName:"Date",width:120},{field:"customer",headerName:"Customer",flex:1.5},{field:"type",headerName:"Type",width:120},{field:"source",headerName:"Source",width:120},{field:"contactPerson",headerName:"Contact Person",flex:1},{field:"status",headerName:"Status",width:120,renderCell:e=>a.jsx(I,{label:e.value,size:"small",color:e.value==="Open"?"success":e.value==="Closed"?"default":"warning"})},{field:"actions",headerName:"Actions",width:130,sortable:!1,renderCell:e=>a.jsxs(a.Fragment,{children:[a.jsx(h,{title:"Edit",children:a.jsx(p,{onClick:()=>C(e.row),children:a.jsx(l,{color:"primary",children:"edit"})})}),a.jsx(h,{title:"Delete",children:a.jsx(p,{onClick:()=>E(e.row.id),children:a.jsx(l,{color:"error",children:"delete"})})})]})}];return a.jsxs(b,{maxWidth:"xl",children:[a.jsx(r,{className:"breadcrumb",children:a.jsx(_,{routeSegments:[{name:"Sales"},{name:"Enquiry"}]})}),a.jsxs(D,{spacing:3,children:[a.jsx(r,{display:"flex",justifyContent:"flex-end",children:a.jsx(z,{variant:"contained",startIcon:a.jsx(l,{children:"add"}),onClick:w,children:"New"})}),a.jsx(r,{sx:{height:450,width:"100%"},children:a.jsx(P,{rows:f,columns:S,loading:g,rowCount:m,paginationMode:"server",paginationModel:i,onPaginationModelChange:e=>{y(n=>({page:e.pageSize!==n.pageSize?0:e.page,pageSize:e.pageSize}))},pageSizeOptions:[5,10,25],disableRowSelectionOnClick:!0})})]})]})}export{R as default};
